"use strict";(self.webpackChunkdigihamster=self.webpackChunkdigihamster||[]).push([[2507],{"./src/app/components/EventTaskFormModal/EventTaskFormModal.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EventTaskFormModal_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),sheet=__webpack_require__("./src/app/components/ui/sheet.tsx"),EventForm=__webpack_require__("./src/app/components/EventForm/index.ts"),ui_switch=__webpack_require__("./src/app/components/ui/switch.tsx"),label=__webpack_require__("./src/app/components/ui/label.tsx"),FormMode=function(FormMode){return FormMode.Event="event",FormMode.Task="task",FormMode}({}),CreateTaskForm=__webpack_require__("./src/app/components/CreateTaskForm/index.ts");const EventTaskFormModal=({testId,open,onClose,onDone,initialValues})=>{const[formMode,setFormMode]=(0,react.useState)(FormMode.Event),handleOnClose=()=>{setFormMode(FormMode.Event),onClose()},handleOnDone=()=>{setFormMode(FormMode.Event),onDone()};return(0,jsx_runtime.jsx)("div",{"data-testid":testId,children:(0,jsx_runtime.jsx)(sheet.cj,{open,children:(0,jsx_runtime.jsxs)(sheet.h,{side:"left",onCloseClick:handleOnClose,onEscapeKeyDown:handleOnClose,"aria-describedby":"Task Modal",children:[(0,jsx_runtime.jsx)(sheet.Fm,{children:(0,jsx_runtime.jsx)(sheet.qp,{children:"event"===formMode?"Create event":"Create Task"})}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center my-2 gap-2",children:[(0,jsx_runtime.jsx)(label.J,{children:"Task?"}),(0,jsx_runtime.jsx)(ui_switch.d,{checked:"task"===formMode,onCheckedChange:val=>setFormMode(val?FormMode.Task:FormMode.Event)})]}),"task"===formMode?(0,jsx_runtime.jsx)(CreateTaskForm.A,{onDone:handleOnDone,deadline:initialValues.startAt}):(0,jsx_runtime.jsx)(EventForm.A,{editMode:!1,onDone:handleOnDone,initialValues:{startAt:initialValues.startAt,endAt:initialValues.endAt,title:"",description:""}})]})})})},EventTaskFormModal_EventTaskFormModal=EventTaskFormModal;EventTaskFormModal.__docgenInfo={description:"",methods:[],displayName:"EventTaskFormModal",props:{testId:{required:!1,tsType:{name:"string"},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},initialValues:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  startAt: number;\n  endAt: number;\n}",signature:{properties:[{key:"startAt",value:{name:"number",required:!0}},{key:"endAt",value:{name:"number",required:!0}}]}},description:""}}};var date=__webpack_require__("./src/app/utils/date/date.ts"),addHours=__webpack_require__("./node_modules/date-fns/addHours.mjs");const EventTaskFormModal_stories={title:"Calendar/EventTaskFormModal",component:EventTaskFormModal_EventTaskFormModal,tags:["autodocs"]},Default={args:{open:!0,onClose:()=>{},onDone:()=>{},initialValues:{startAt:(0,date.tB)().valueOf(),endAt:(0,addHours.L)((0,date.tB)(),1).valueOf()}}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: defaultArgs\n}",...Default.parameters?.docs?.source}}}},"./src/app/components/EventForm/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>EventForm_EventForm});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),ui_form=__webpack_require__("./src/app/components/ui/form.tsx"),input=__webpack_require__("./src/app/components/ui/input.tsx"),ui_select=__webpack_require__("./src/app/components/ui/select.tsx"),ui_button=__webpack_require__("./src/app/components/ui/button.tsx"),ui_textarea=__webpack_require__("./src/app/components/ui/textarea.tsx"),actions_context=__webpack_require__("./src/app/utils/hooks/use-events/actions-context.tsx"),state_context=__webpack_require__("./src/app/utils/hooks/use-projects/state-context.ts");const FormSchema=lib.z.object({title:lib.z.string().min(1,{message:"This field has to be filled."}),description:lib.z.string(),project:lib.z.string().min(1,{message:"This field has to be filled."}),startAt:lib.z.number(),endAt:lib.z.number(),allDay:lib.z.boolean()}),EventForm=({testId,onDone,...restProps})=>{const{data:projects,defaultProject}=(0,state_context.h)(),{create:createEvent,update:updateEvent}=(0,actions_context.S)(),getInitialValues=(0,react.useCallback)((()=>restProps.editMode?{title:restProps.event.title,description:restProps.event.description||"",project:restProps.event.projectId||(null==defaultProject?void 0:defaultProject._id),allDay:restProps.event.allDay,startAt:restProps.event.startAt,endAt:restProps.event.endAt}:restProps.initialValues),[defaultProject,restProps]),form=(0,index_esm.mN)({resolver:(0,zod.u)(FormSchema),defaultValues:{title:"",description:"",project:null==defaultProject?void 0:defaultProject._id,allDay:!1,...getInitialValues()}});return(0,jsx_runtime.jsx)("div",{"data-testid":testId,children:(0,jsx_runtime.jsx)(ui_form.lV,{...form,children:(0,jsx_runtime.jsxs)("form",{onSubmit:form.handleSubmit((async data=>{if(restProps.editMode)return void updateEvent(restProps.event._id,{title:data.title,description:data.description,projectId:data.project},onDone);const eventData={title:data.title,description:data.description,projectId:data.project,allDay:data.allDay,startAt:data.startAt,endAt:data.endAt};createEvent(eventData,onDone)})),className:"space-y-6",children:[(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"title",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Title"}),(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(input.p,{autoFocus:!0,placeholder:"Title",...field})}),(0,jsx_runtime.jsx)(ui_form.C5,{})]})}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"project",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Project"}),(0,jsx_runtime.jsxs)(ui_select.l6,{onValueChange:field.onChange,defaultValue:field.value,value:field.value,children:[(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(ui_select.bq,{children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Select Project"})})}),(0,jsx_runtime.jsx)(ui_select.gC,{children:projects.map((project=>(0,jsx_runtime.jsx)(ui_select.eb,{value:project._id,role:"option",children:project.title},project._id)))})]}),(0,jsx_runtime.jsx)(ui_form.C5,{})]})}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"description",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Description"}),(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(ui_textarea.T,{placeholder:"description",...field})}),(0,jsx_runtime.jsx)(ui_form.C5,{})]})}),(0,jsx_runtime.jsx)(ui_button.$,{type:"submit",children:restProps.editMode?"Save":"Create"})]})})})},EventForm_EventForm=EventForm;EventForm.__docgenInfo={description:"",methods:[],displayName:"EventForm"}},"./src/app/components/ui/switch.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>Switch});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-switch/dist/index.mjs"),_app_components_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/app/components/utils/index.ts");const Switch=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__.bL,{className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",className),...props,ref,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__.zi,{className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})));Switch.displayName=_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__.bL.displayName,Switch.__docgenInfo={description:"",methods:[]}},"./src/app/utils/hooks/use-events/actions-context.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>useEventsActions});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const DEFAULT_EVENTS_ACTIONS={create:()=>{},update:()=>{},delete:()=>{}},EventsActionsContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(DEFAULT_EVENTS_ACTIONS),useEventsActions=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(EventsActionsContext)}}]);