"use strict";(self.webpackChunkdigihamster=self.webpackChunkdigihamster||[]).push([[2843],{"./src/app/components/ProjectCard/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProjectCard_ProjectCard});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),card=__webpack_require__("./src/app/components/ui/card.tsx"),use_tasks=__webpack_require__("./src/app/utils/hooks/use-tasks.tsx"),estimates=__webpack_require__("./src/app/utils/tasks/estimates.ts"),context_menu=__webpack_require__("./src/app/components/ui/context-menu.tsx"),ProjectModalForm=__webpack_require__("./src/app/components/ProjectModalForm/index.ts"),IconCircleCheck=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconCircleCheck.mjs"),IconXboxX=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconXboxX.mjs"),sortable_esm=__webpack_require__("./node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),utilities_esm=__webpack_require__("./node_modules/@dnd-kit/utilities/dist/utilities.esm.js");const ProjectCard=({testId,project,selected})=>{const{data:tasks}=(0,use_tasks.Ay)(),[projectModalOpen,setProjectModalOpen]=(0,react.useState)(!1),{attributes,listeners,setNodeRef,transform,transition}=(0,sortable_esm.gl)({id:project._id}),style={transform:utilities_esm.Ks.Transform.toString(transform),transition},taskCount=(0,react.useMemo)((()=>tasks.filter((t=>t.projectId===project._id)).length),[tasks,project]),completedTasksCount=(0,react.useMemo)((()=>tasks.filter((t=>t.projectId===project._id&&t.completed)).length),[tasks,project._id]),estimatedTaskCount=(0,react.useMemo)((()=>tasks.filter((t=>t.projectId===project._id&&!!t.estimate)).length),[project._id,tasks]),completed=(0,react.useMemo)((()=>0===tasks.filter((t=>t.projectId===project._id&&!t.completed)).length),[tasks,project]),completedTasksEta=(0,react.useMemo)((()=>tasks.filter((t=>t.projectId===project._id&&t.completed)).reduce(estimates.X,0)),[tasks,project._id]),totalTaskEta=(0,react.useMemo)((()=>tasks.filter((t=>t.projectId===project._id)).reduce(estimates.X,0)),[tasks,project._id]),closeProjectForm=()=>setProjectModalOpen(!1);return(0,jsx_runtime.jsxs)("div",{"data-testid":testId,children:[(0,jsx_runtime.jsx)(ProjectModalForm.A,{editMode:!0,open:projectModalOpen,onDone:closeProjectForm,onClose:closeProjectForm,project}),(0,jsx_runtime.jsxs)(context_menu.tz,{children:[(0,jsx_runtime.jsx)(context_menu.Rc,{children:(0,jsx_runtime.jsxs)(card.Zp,{className:`w-[350px] p-0 rounded-md hover:border hover:border-primary ${project.disabled?"opacity-40 line-through":""} ${selected&&"border border-[#791027]"}`,ref:setNodeRef,style,...attributes,...listeners,children:[(0,jsx_runtime.jsx)(card.aR,{className:"p-4",children:(0,jsx_runtime.jsxs)(card.ZB,{className:"font-normal flex items-center justify-between",children:[(0,jsx_runtime.jsx)("div",{children:project.title}),(0,jsx_runtime.jsxs)("div",{className:"flex",children:[completed&&(0,jsx_runtime.jsx)(IconCircleCheck.A,{"data-testid":"completed-icon",size:19,color:"black",fill:project.color,className:"mr-1"}),!completed&&!project.disabled&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center text-xs",children:[completedTasksCount,"/",taskCount]}),project.disabled&&(0,jsx_runtime.jsx)(IconXboxX.A,{"data-testid":"disabled-icon",size:19,color:"black",fill:project.color,className:"mr-1"})]})]})}),!completed&&!project.disabled&&(0,jsx_runtime.jsx)(card.Wu,{className:"pb-4 px-4 text-xs whitespace-pre-wrap muted",children:(0,jsx_runtime.jsx)("div",{"data-testid":"progress-bar",className:"w-full border bg--secondary h-2 bg-[#22040b]",children:(0,jsx_runtime.jsx)("div",{"data-testid":"progress-bar-outer",style:{height:"100%",width:estimatedTaskCount/taskCount*100+"%",backgroundColor:"#1b1917"},children:(0,jsx_runtime.jsx)("div",{"data-testid":"progress-bar-inner",style:{height:"100%",backgroundColor:project.color,width:completedTasksEta/totalTaskEta*100+"%"}})})})})]})}),(0,jsx_runtime.jsx)(context_menu.Ip,{className:"w-64",children:(0,jsx_runtime.jsx)(context_menu.kt,{inset:!0,onClick:()=>setProjectModalOpen(!0),children:"Edit"})})]})]})},ProjectCard_ProjectCard=ProjectCard;ProjectCard.__docgenInfo={description:"",methods:[],displayName:"ProjectCard",props:{testId:{required:!1,tsType:{name:"string"},description:""},project:{required:!0,tsType:{name:"Project"},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""}}}},"./src/app/components/ProjectForm/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProjectForm_ProjectForm});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),ui_form=__webpack_require__("./src/app/components/ui/form.tsx"),input=__webpack_require__("./src/app/components/ui/input.tsx"),ui_select=__webpack_require__("./src/app/components/ui/select.tsx");const colors=["#ef4444","#f97316","#fbbf24","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#c084fc","#d946ef","#ec4899","#f43f5e"];var ui_button=__webpack_require__("./src/app/components/ui/button.tsx"),ui_switch=__webpack_require__("./src/app/components/ui/switch.tsx"),RteFormField=__webpack_require__("./src/app/components/RteFormField/index.ts"),actions_context=__webpack_require__("./src/app/utils/hooks/use-projects/actions-context.tsx"),state_context=__webpack_require__("./src/app/utils/hooks/use-life-aspects/state-context.ts");const FormSchema=lib.z.object({title:lib.z.string().min(1,{message:"Required."}),color:lib.z.string().min(1,{message:"Required."}),disabled:lib.z.boolean(),category:lib.z.string(),jsonDescription:lib.z.any()}),ProjectForm=({testId,onDone,...restProps})=>{var _lifeAspects_;const{update:updateProject,create:createProject}=(0,actions_context.l)(),{data:lifeAspects}=(0,state_context.a)(),getInitialValues=(0,react.useCallback)((()=>restProps.editMode?{title:restProps.project.title,color:restProps.project.color,category:restProps.project.category||"",disabled:restProps.project.disabled,jsonDescription:{title:"",content:"",tags:[],tasks:[],textContent:"",contentJSON:restProps.project.jsonDescription,projectId:""}}:restProps.initialValues),[restProps]),form=(0,index_esm.mN)({resolver:(0,zod.u)(FormSchema),defaultValues:{title:"",color:"#e11d48",disabled:!1,category:(null===(_lifeAspects_=lifeAspects[0])||void 0===_lifeAspects_?void 0:_lifeAspects_._id)||"",jsonDescription:{title:"",content:"",tags:[],tasks:[],textContent:"",contentJSON:{},projectId:""},...getInitialValues()}});return(0,jsx_runtime.jsx)(ui_form.lV,{...form,"data-testid":testId,children:(0,jsx_runtime.jsxs)("form",{onSubmit:form.handleSubmit((values=>{restProps.editMode?updateProject(restProps.project._id,{title:values.title,color:values.color,disabled:values.disabled,category:values.category,jsonDescription:values.jsonDescription.contentJSON}):createProject({title:values.title,color:values.color,disabled:values.disabled,category:values.category,jsonDescription:values.jsonDescription.contentJSON}),onDone()})),className:"space-y-6",children:[(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"title",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Title"}),(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(input.p,{placeholder:"Title",...field})}),(0,jsx_runtime.jsx)(ui_form.C5,{})]})}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"jsonDescription",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{className:"flex flex-col",children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Goal"}),(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(RteFormField.A,{testId:"ProjectForm-rte-testid",value:field.value.contentJSON,onChange:field.onChange})})]})}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"color",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Color"}),(0,jsx_runtime.jsxs)(ui_select.l6,{onValueChange:field.onChange,defaultValue:field.value,value:field.value,children:[(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(ui_select.bq,{children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Select Color"})})}),(0,jsx_runtime.jsx)(ui_select.gC,{children:colors.map((color=>(0,jsx_runtime.jsx)(ui_select.eb,{value:color,role:"option",children:(0,jsx_runtime.jsxs)("div",{className:"flex space-x-2",children:[(0,jsx_runtime.jsx)("div",{className:"h-4 w-4",style:{backgroundColor:color}}),(0,jsx_runtime.jsx)("div",{children:color})]})},color)))})]}),(0,jsx_runtime.jsx)(ui_form.C5,{})]})}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"category",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Life aspect"}),(0,jsx_runtime.jsxs)(ui_select.l6,{onValueChange:field.onChange,defaultValue:field.value,value:field.value,children:[(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(ui_select.bq,{children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Select Aspect"})})}),(0,jsx_runtime.jsx)(ui_select.gC,{children:lifeAspects.map((la=>(0,jsx_runtime.jsx)(ui_select.eb,{value:la._id,role:"option",children:la.title},la._id)))})]}),(0,jsx_runtime.jsx)(ui_form.C5,{})]})}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"disabled",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-0.5",children:[(0,jsx_runtime.jsx)(ui_form.lR,{children:"Disable"}),(0,jsx_runtime.jsx)(ui_form.Rr,{children:"Do not allow selection"})]}),(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(ui_switch.d,{checked:field.value,onCheckedChange:field.onChange})})]})}),(0,jsx_runtime.jsx)("div",{className:"space-x-2",children:(0,jsx_runtime.jsx)(ui_button.$,{type:"submit",children:restProps.editMode?"Save":"Create"})})]})})},ProjectForm_ProjectForm=ProjectForm;ProjectForm.__docgenInfo={description:"",methods:[],displayName:"ProjectForm"}},"./src/app/components/ProjectModal/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProjectModal_ProjectModal});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),sheet=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/app/components/ui/sheet.tsx"));const ProjectModal=({testId,open,onClose,children})=>(0,jsx_runtime.jsx)("div",{"data-testid":testId,children:(0,jsx_runtime.jsx)(sheet.cj,{open,children:(0,jsx_runtime.jsxs)(sheet.h,{side:"left",onCloseClick:onClose,onEscapeKeyDown:onClose,"aria-describedby":"Project Form Modal",children:[(0,jsx_runtime.jsx)(sheet.Fm,{children:(0,jsx_runtime.jsx)(sheet.qp,{children:"Project"})}),children]})})}),ProjectModal_ProjectModal=ProjectModal;ProjectModal.__docgenInfo={description:"",methods:[],displayName:"ProjectModal",props:{testId:{required:!1,tsType:{name:"string"},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}}},"./src/app/components/ProjectModalForm/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProjectModalForm_ProjectModalForm});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),ProjectModal=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/app/components/ProjectModal/index.ts")),ProjectForm=__webpack_require__("./src/app/components/ProjectForm/index.ts");const ProjectModalForm=({testId,open,onClose,...projectFormProps})=>(0,jsx_runtime.jsx)("div",{"data-testid":testId,children:(0,jsx_runtime.jsx)(ProjectModal.A,{open,onClose,children:(0,jsx_runtime.jsx)(ProjectForm.A,{...projectFormProps})})}),ProjectModalForm_ProjectModalForm=ProjectModalForm;ProjectModalForm.__docgenInfo={description:"",methods:[],displayName:"ProjectModalForm"}},"./src/app/components/ui/switch.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>Switch});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-switch/dist/index.mjs"),_app_components_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/app/components/utils/index.ts");const Switch=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__.bL,{className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",className),...props,ref,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__.zi,{className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})));Switch.displayName=_radix_ui_react_switch__WEBPACK_IMPORTED_MODULE_2__.bL.displayName,Switch.__docgenInfo={description:"",methods:[]}},"./src/app/utils/hooks/use-life-aspects/state-context.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>useLifeAspectsState,k:()=>LifeAspectsStateContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const DEFAULT_LIFE_ASPECTS_STATE={data:[],isLoading:!1,errorMessage:void 0},LifeAspectsStateContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(DEFAULT_LIFE_ASPECTS_STATE),useLifeAspectsState=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(LifeAspectsStateContext)},"./src/app/utils/hooks/use-projects/actions-context.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>useProjectsActions,r:()=>ProjectsActionsContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const DEFAULT_PROJECTS_ACTIONS={create:()=>{},update:()=>{},delete:()=>{},updateOrder:()=>{}},ProjectsActionsContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(DEFAULT_PROJECTS_ACTIONS),useProjectsActions=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ProjectsActionsContext)},"./src/app/utils/tasks/estimates.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>addEstimates});const addEstimates=(acc,val)=>acc+(val.estimate||0)}}]);