"use strict";(self.webpackChunkdigihamster=self.webpackChunkdigihamster||[]).push([[103],{"./src/app/components/Projects/Projects.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Projects_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),lib=__webpack_require__("./node_modules/@tanstack/react-table/build/lib/index.mjs"),build_lib=__webpack_require__("./node_modules/@tanstack/table-core/build/lib/index.mjs"),react_icons_esm=__webpack_require__("./node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),input=__webpack_require__("./src/app/components/ui/input.tsx"),popover=__webpack_require__("./src/app/components/ui/popover.tsx"),ui_button=__webpack_require__("./src/app/components/ui/button.tsx"),separator=__webpack_require__("./src/app/components/ui/separator.tsx"),badge=__webpack_require__("./src/app/components/ui/badge.tsx"),command=__webpack_require__("./src/app/components/ui/command.tsx"),utils=__webpack_require__("./src/app/components/utils/index.ts"),sort=__webpack_require__("./node_modules/remeda/dist/es/sort.js");function DataTableFacetedFilter({column,title,options}){const facets=null==column?void 0:column.getFacetedUniqueValues(),selectedValues=(0,react.useMemo)((()=>new Set(null==column?void 0:column.getFilterValue())),[column]),optionsToShow=(0,react.useMemo)((()=>(0,sort.d)(options,(o=>selectedValues.has(o.value)?0:1))),[options,selectedValues]);return(0,jsx_runtime.jsxs)(popover.AM,{children:[(0,jsx_runtime.jsx)(popover.Wv,{asChild:!0,children:(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[(0,jsx_runtime.jsx)(react_icons_esm.WBl,{className:"mr-2 h-4 w-4"}),title,(null==selectedValues?void 0:selectedValues.size)>0&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(separator.w,{orientation:"vertical",className:"mx-2 h-4"}),(0,jsx_runtime.jsx)(badge.E,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:selectedValues.size}),(0,jsx_runtime.jsx)("div",{className:"hidden space-x-1 lg:flex",children:selectedValues.size>2?(0,jsx_runtime.jsxs)(badge.E,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[selectedValues.size," selected"]}):optionsToShow.filter((option=>selectedValues.has(option.value))).map((option=>(0,jsx_runtime.jsx)(badge.E,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:option.label},option.value)))})]})]})}),(0,jsx_runtime.jsx)(popover.hl,{className:"w-[200px] p-0",align:"start",children:(0,jsx_runtime.jsxs)(command.uB,{children:[(0,jsx_runtime.jsx)(command.G7,{placeholder:title}),(0,jsx_runtime.jsxs)(command.oI,{children:[(0,jsx_runtime.jsx)(command.xL,{children:"No results found."}),(0,jsx_runtime.jsx)(command.L$,{children:optionsToShow.map((option=>{const isSelected=selectedValues.has(option.value);return(0,jsx_runtime.jsxs)(command.h_,{onSelect:()=>{isSelected?selectedValues.delete(option.value):selectedValues.add(option.value);const filterValues=Array.from(selectedValues);null==column||column.setFilterValue(filterValues.length?filterValues:void 0)},children:[(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",isSelected?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:(0,jsx_runtime.jsx)(react_icons_esm.Srz,{className:(0,utils.cn)("h-4 w-4")})}),option.icon&&(0,jsx_runtime.jsx)(option.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,jsx_runtime.jsx)("span",{children:option.label}),(null==facets?void 0:facets.get(option.value))&&(0,jsx_runtime.jsx)("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:facets.get(option.value)})]},option.value)}))}),selectedValues.size>0&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(command.fx,{}),(0,jsx_runtime.jsx)(command.L$,{children:(0,jsx_runtime.jsx)(command.h_,{onSelect:()=>null==column?void 0:column.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}DataTableFacetedFilter.__docgenInfo={description:"",methods:[],displayName:"DataTableFacetedFilter",props:{column:{required:!1,tsType:{name:"Column",elements:[{name:"TData"},{name:"TValue"}],raw:"Column<TData, TValue>"},description:""},title:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"Option"}],raw:"Option[]"},description:""}}};var dist=__webpack_require__("./node_modules/@radix-ui/react-dropdown-menu/dist/index.mjs");const DropdownMenu=dist.bL,DropdownMenuTrigger=dist.l9,DropdownMenuSubTrigger=(dist.YJ,dist.ZL,dist.Pb,dist.z6,react.forwardRef((({className,inset,children,...props},ref)=>(0,jsx_runtime.jsxs)(dist.ZP,{ref,className:(0,utils.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",inset&&"pl-8",className),...props,children:[children,(0,jsx_runtime.jsx)(react_icons_esm.vKP,{className:"ml-auto h-4 w-4"})]}))));DropdownMenuSubTrigger.displayName=dist.ZP.displayName;const DropdownMenuSubContent=react.forwardRef((({className,...props},ref)=>(0,jsx_runtime.jsx)(dist.G5,{ref,className:(0,utils.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",className),...props})));DropdownMenuSubContent.displayName=dist.G5.displayName;const DropdownMenuContent=react.forwardRef((({className,sideOffset=4,...props},ref)=>(0,jsx_runtime.jsx)(dist.ZL,{children:(0,jsx_runtime.jsx)(dist.UC,{ref,sideOffset,className:(0,utils.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",className),...props})})));DropdownMenuContent.displayName=dist.UC.displayName;const DropdownMenuItem=react.forwardRef((({className,inset,...props},ref)=>(0,jsx_runtime.jsx)(dist.q7,{ref,className:(0,utils.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",inset&&"pl-8",className),...props})));DropdownMenuItem.displayName=dist.q7.displayName;const DropdownMenuCheckboxItem=react.forwardRef((({className,children,checked,...props},ref)=>(0,jsx_runtime.jsxs)(dist.H_,{ref,className:(0,utils.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",className),checked,...props,children:[(0,jsx_runtime.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,jsx_runtime.jsx)(dist.VF,{children:(0,jsx_runtime.jsx)(react_icons_esm.Srz,{className:"h-4 w-4"})})}),children]})));DropdownMenuCheckboxItem.displayName=dist.H_.displayName;const DropdownMenuRadioItem=react.forwardRef((({className,children,...props},ref)=>(0,jsx_runtime.jsxs)(dist.hN,{ref,className:(0,utils.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",className),...props,children:[(0,jsx_runtime.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,jsx_runtime.jsx)(dist.VF,{children:(0,jsx_runtime.jsx)(react_icons_esm.RiX,{className:"h-4 w-4 fill-current"})})}),children]})));DropdownMenuRadioItem.displayName=dist.hN.displayName;const DropdownMenuLabel=react.forwardRef((({className,inset,...props},ref)=>(0,jsx_runtime.jsx)(dist.JU,{ref,className:(0,utils.cn)("px-2 py-1.5 text-sm font-semibold",inset&&"pl-8",className),...props})));DropdownMenuLabel.displayName=dist.JU.displayName;const DropdownMenuSeparator=react.forwardRef((({className,...props},ref)=>(0,jsx_runtime.jsx)(dist.wv,{ref,className:(0,utils.cn)("-mx-1 my-1 h-px bg-muted",className),...props})));DropdownMenuSeparator.displayName=dist.wv.displayName;const DropdownMenuShortcut=({className,...props})=>(0,jsx_runtime.jsx)("span",{className:(0,utils.cn)("ml-auto text-xs tracking-widest opacity-60",className),...props});function DataTableViewOptions({table}){return(0,jsx_runtime.jsxs)(DropdownMenu,{children:[(0,jsx_runtime.jsx)(DropdownMenuTrigger,{asChild:!0,children:(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[(0,jsx_runtime.jsx)(react_icons_esm.LMN,{className:"mr-2 h-4 w-4"}),"View"]})}),(0,jsx_runtime.jsxs)(DropdownMenuContent,{align:"end",className:"w-[150px]",children:[(0,jsx_runtime.jsx)(DropdownMenuLabel,{children:"Toggle columns"}),(0,jsx_runtime.jsx)(DropdownMenuSeparator,{}),table.getAllColumns().filter((column=>void 0!==column.accessorFn&&column.getCanHide())).map((column=>(0,jsx_runtime.jsx)(DropdownMenuCheckboxItem,{className:"capitalize",checked:column.getIsVisible(),onCheckedChange:value=>column.toggleVisibility(!!value),children:column.id},column.id)))]})]})}DropdownMenuShortcut.displayName="DropdownMenuShortcut",DropdownMenuContent.__docgenInfo={description:"",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}},DropdownMenuItem.__docgenInfo={description:"",methods:[],props:{inset:{required:!1,tsType:{name:"boolean"},description:""}}},DropdownMenuCheckboxItem.__docgenInfo={description:"",methods:[]},DropdownMenuRadioItem.__docgenInfo={description:"",methods:[]},DropdownMenuLabel.__docgenInfo={description:"",methods:[],props:{inset:{required:!1,tsType:{name:"boolean"},description:""}}},DropdownMenuSeparator.__docgenInfo={description:"",methods:[]},DropdownMenuShortcut.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuShortcut"},DropdownMenuSubContent.__docgenInfo={description:"",methods:[]},DropdownMenuSubTrigger.__docgenInfo={description:"",methods:[],props:{inset:{required:!1,tsType:{name:"boolean"},description:""}}},DataTableViewOptions.__docgenInfo={description:"",methods:[],displayName:"DataTableViewOptions",props:{table:{required:!0,tsType:{name:"Table",elements:[{name:"TData"}],raw:"Table<TData>"},description:""}}};var use_tags=__webpack_require__("./src/app/utils/hooks/use-tags.tsx"),state_context=__webpack_require__("./src/app/utils/hooks/use-projects/state-context.ts");function DataTableToolbar({table,includeProjectId}){var _table_getColumn;const isFiltered=table.getState().columnFilters.length>0,{data:projects,isLoading}=(0,state_context.h)(),{data:tags}=(0,use_tags.Ay)(),projectOptions=projects.map((project=>({label:project.title,value:project._id}))),tagOptions=tags.map((tag=>({label:tag.title,value:tag._id})));return isLoading||!projects?"loading":(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-1 items-center space-x-2",children:[(0,jsx_runtime.jsx)(input.p,{placeholder:"Filter tasks...",value:null!==(_table_getColumn_getFilterValue=null===(_table_getColumn=table.getColumn("title"))||void 0===_table_getColumn?void 0:_table_getColumn.getFilterValue())&&void 0!==_table_getColumn_getFilterValue?_table_getColumn_getFilterValue:"",onChange:event=>{var _table_getColumn;return null===(_table_getColumn=table.getColumn("title"))||void 0===_table_getColumn?void 0:_table_getColumn.setFilterValue(event.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),includeProjectId&&(0,jsx_runtime.jsx)(DataTableFacetedFilter,{column:table.getColumn("projectId"),title:"Projects",options:projectOptions}),table.getColumn("description")&&(0,jsx_runtime.jsx)(DataTableFacetedFilter,{column:table.getColumn("description"),title:"Tags",options:tagOptions}),isFiltered&&(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",onClick:()=>table.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",(0,jsx_runtime.jsx)(react_icons_esm.MKb,{className:"ml-2 h-4 w-4"})]})]}),(0,jsx_runtime.jsx)(DataTableViewOptions,{table})]});var _table_getColumn_getFilterValue}DataTableToolbar.__docgenInfo={description:"",methods:[],displayName:"DataTableToolbar",props:{table:{required:!0,tsType:{name:"Table",elements:[{name:"TData"}],raw:"Table<TData>"},description:""},includeProjectId:{required:!0,tsType:{name:"boolean"},description:""}}};var ui_table=__webpack_require__("./src/app/components/ui/table.tsx"),ui_select=__webpack_require__("./src/app/components/ui/select.tsx");function DataTablePagination({table}){return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[table.getFilteredSelectedRowModel().rows.length," of"," ",table.getFilteredRowModel().rows.length," row(s) selected."]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium",children:"Rows per page"}),(0,jsx_runtime.jsxs)(ui_select.l6,{value:`${table.getState().pagination.pageSize}`,onValueChange:value=>{table.setPageSize(Number(value))},children:[(0,jsx_runtime.jsx)(ui_select.bq,{className:"h-8 w-[70px]",children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:table.getState().pagination.pageSize})}),(0,jsx_runtime.jsx)(ui_select.gC,{side:"top",children:[10,20,30,40,50].map((pageSize=>(0,jsx_runtime.jsx)(ui_select.eb,{value:`${pageSize}`,children:pageSize},pageSize)))})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",table.getState().pagination.pageIndex+1," of"," ",table.getPageCount()]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>table.setPageIndex(0),disabled:!table.getCanPreviousPage(),children:[(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,jsx_runtime.jsx)(react_icons_esm.jvd,{className:"h-4 w-4"})]}),(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>table.previousPage(),disabled:!table.getCanPreviousPage(),children:[(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,jsx_runtime.jsx)(react_icons_esm.YJP,{className:"h-4 w-4"})]}),(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>table.nextPage(),disabled:!table.getCanNextPage(),children:[(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,jsx_runtime.jsx)(react_icons_esm.vKP,{className:"h-4 w-4"})]}),(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>table.setPageIndex(table.getPageCount()-1),disabled:!table.getCanNextPage(),children:[(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,jsx_runtime.jsx)(react_icons_esm.QZK,{className:"h-4 w-4"})]})]})]})]})}function DataTable({columns,data,onRowClick,disablePagination=!1,disableSorting=!1,disableToolbar=!1,includeProjectId=!1}){var _table_getRowModel_rows;const[rowSelection,setRowSelection]=(0,react.useState)({}),[columnVisibility,setColumnVisibility]=react.useState({}),[columnFilters,setColumnFilters]=react.useState([]),[sorting,setSorting]=react.useState([]),table=(0,lib.N4)({data,columns,state:{sorting,columnVisibility,rowSelection,columnFilters},enableRowSelection:!0,onRowSelectionChange:setRowSelection,onSortingChange:disableSorting?void 0:setSorting,onColumnFiltersChange:setColumnFilters,onColumnVisibilityChange:setColumnVisibility,getCoreRowModel:(0,build_lib.HT)(),getFilteredRowModel:(0,build_lib.hM)(),getPaginationRowModel:disablePagination?void 0:(0,build_lib.kW)(),getSortedRowModel:(0,build_lib.h5)(),getFacetedRowModel:(0,build_lib.kQ)(),getFacetedUniqueValues:(0,build_lib.oS)(),autoResetPageIndex:!1,enableSorting:!disableSorting});return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[!disableToolbar&&(0,jsx_runtime.jsx)(DataTableToolbar,{table,includeProjectId}),(0,jsx_runtime.jsx)("div",{className:"rounded-md border",children:(0,jsx_runtime.jsxs)(ui_table.XI,{children:[(0,jsx_runtime.jsx)(ui_table.A0,{children:table.getHeaderGroups().map((headerGroup=>(0,jsx_runtime.jsx)(ui_table.Hj,{children:headerGroup.headers.map((header=>(0,jsx_runtime.jsx)(ui_table.nd,{colSpan:header.colSpan,children:header.isPlaceholder?null:(0,lib.Kv)(header.column.columnDef.header,header.getContext())},header.id)))},headerGroup.id)))}),(0,jsx_runtime.jsx)(ui_table.BF,{children:(null===(_table_getRowModel_rows=table.getRowModel().rows)||void 0===_table_getRowModel_rows?void 0:_table_getRowModel_rows.length)?table.getRowModel().rows.map((row=>(0,jsx_runtime.jsx)(ui_table.Hj,{"data-state":row.getIsSelected()&&"selected",onClick:()=>onRowClick(row.original),children:row.getVisibleCells().map((cell=>(0,jsx_runtime.jsx)(ui_table.nA,{children:(0,lib.Kv)(cell.column.columnDef.cell,cell.getContext())},cell.id)))},row.id))):(0,jsx_runtime.jsx)(ui_table.Hj,{children:(0,jsx_runtime.jsx)(ui_table.nA,{colSpan:columns.length,className:"h-24 text-center",children:"No results."})})})]})}),!disablePagination&&(0,jsx_runtime.jsx)(DataTablePagination,{table})]})}DataTablePagination.__docgenInfo={description:"",methods:[],displayName:"DataTablePagination",props:{table:{required:!0,tsType:{name:"Table",elements:[{name:"TData"}],raw:"Table<TData>"},description:""}}},DataTable.__docgenInfo={description:"",methods:[],displayName:"DataTable",props:{columns:{required:!0,tsType:{name:"Array",elements:[{name:"ColumnDef",elements:[{name:"TData"},{name:"TValue"}],raw:"ColumnDef<TData, TValue>"}],raw:"ColumnDef<TData, TValue>[]"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"TData"}],raw:"TData[]"},description:""},disablePagination:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disableSorting:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disableToolbar:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},includeProjectId:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};var use_tasks=__webpack_require__("./src/app/utils/hooks/use-tasks.tsx"),TaskFormModal=__webpack_require__("./src/app/components/TaskFormModal/index.ts"),ProjectCard=__webpack_require__("./src/app/components/ProjectCard/index.ts"),ProjectModalForm=__webpack_require__("./src/app/components/ProjectModalForm/index.ts"),sortable_esm=__webpack_require__("./node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),core_esm=__webpack_require__("./node_modules/@dnd-kit/core/dist/core.esm.js"),ui_switch=__webpack_require__("./src/app/components/ui/switch.tsx"),label=__webpack_require__("./src/app/components/ui/label.tsx"),ProjectBurnDownChart=__webpack_require__("./src/app/components/ProjectBurnDownChart/index.ts"),format=__webpack_require__("./node_modules/date-fns/format.mjs");function DataTableColumnHeader({column,title,className}){return column.getCanSort()?(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("flex items-center space-x-2",className),children:(0,jsx_runtime.jsxs)(DropdownMenu,{children:[(0,jsx_runtime.jsx)(DropdownMenuTrigger,{asChild:!0,children:(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[(0,jsx_runtime.jsx)("span",{children:title}),"desc"===column.getIsSorted()?(0,jsx_runtime.jsx)(react_icons_esm.ZLN,{className:"ml-2 h-4 w-4"}):"asc"===column.getIsSorted()?(0,jsx_runtime.jsx)(react_icons_esm.Kpk,{className:"ml-2 h-4 w-4"}):(0,jsx_runtime.jsx)(react_icons_esm.TBE,{className:"ml-2 h-4 w-4"})]})}),(0,jsx_runtime.jsxs)(DropdownMenuContent,{align:"start",children:[(0,jsx_runtime.jsxs)(DropdownMenuItem,{onClick:()=>column.toggleSorting(!1),children:[(0,jsx_runtime.jsx)(react_icons_esm.Kpk,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),(0,jsx_runtime.jsxs)(DropdownMenuItem,{onClick:()=>column.toggleSorting(!0),children:[(0,jsx_runtime.jsx)(react_icons_esm.ZLN,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),(0,jsx_runtime.jsx)(DropdownMenuSeparator,{}),(0,jsx_runtime.jsxs)(DropdownMenuItem,{onClick:()=>column.toggleVisibility(!1),children:[(0,jsx_runtime.jsx)(react_icons_esm.luy,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)(className),children:title})}DataTableColumnHeader.__docgenInfo={description:"",methods:[],displayName:"DataTableColumnHeader",props:{column:{required:!0,tsType:{name:"Column",elements:[{name:"TData"},{name:"TValue"}],raw:"Column<TData, TValue>"},description:""},title:{required:!0,tsType:{name:"string"},description:""}}};var IconCircle=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconCircle.mjs"),IconComet=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconComet.mjs"),IconStar=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconStar.mjs"),IconStars=__webpack_require__("./node_modules/@tabler/icons-react/dist/esm/icons/IconStars.mjs");const Estimate=({estimate})=>estimate?estimate<1?(0,jsx_runtime.jsx)(IconComet.A,{size:18,color:"green"}):estimate>0&&estimate<4?(0,jsx_runtime.jsx)("div",{className:"flex",children:[...Array(estimate)].map(((_v,i)=>(0,jsx_runtime.jsx)(IconStar.A,{size:10,className:"text-gray-200"},`icon-${i}`)))}):(0,jsx_runtime.jsx)(IconStars.A,{size:18,className:"text-gray-200"}):(0,jsx_runtime.jsx)(IconCircle.A,{className:"h-4 w-4",color:"#eab308"}),Estimate_Estimate=Estimate;Estimate.__docgenInfo={description:"",methods:[],displayName:"Estimate",props:{estimate:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""}}};var use_edit_task=__webpack_require__("./src/app/utils/hooks/use-edit-task.tsx"),zod_lib=__webpack_require__("./node_modules/zod/lib/index.mjs");const taskSchema=zod_lib.z.object({_id:zod_lib.z.string(),title:zod_lib.z.string(),description:zod_lib.z.union([zod_lib.z.string(),zod_lib.z.undefined(),zod_lib.z.null()]),estimate:zod_lib.z.union([zod_lib.z.number(),zod_lib.z.undefined(),zod_lib.z.null()]),projectId:zod_lib.z.union([zod_lib.z.string(),zod_lib.z.null()]),deadline:zod_lib.z.union([zod_lib.z.number(),zod_lib.z.undefined(),zod_lib.z.null()]),isActive:zod_lib.z.boolean()||zod_lib.z.undefined(),completed:zod_lib.z.boolean(),deleted:zod_lib.z.boolean(),sortOrder:zod_lib.z.union([zod_lib.z.number(),zod_lib.z.undefined(),zod_lib.z.null()]),completedAt:zod_lib.z.union([zod_lib.z.number(),zod_lib.z.undefined()]),activatedAt:zod_lib.z.union([zod_lib.z.number(),zod_lib.z.undefined(),zod_lib.z.null()]),parentTaskId:zod_lib.z.union([zod_lib.z.string(),zod_lib.z.null(),zod_lib.z.undefined()]),tags:zod_lib.z.array(zod_lib.z.string()),createdAt:zod_lib.z.string(),updatedAt:zod_lib.z.string()});function DataTableRowActions({row}){const task=taskSchema.parse(row.original),[taskFormOpen,setTaskFormOpen]=(0,react.useState)(!1),{editTask,deleteTask}=(0,use_edit_task.A)(),closeTaskForm=()=>setTaskFormOpen(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(TaskFormModal.A,{onDone:closeTaskForm,onClose:closeTaskForm,editMode:!0,task,open:taskFormOpen}),(0,jsx_runtime.jsxs)(DropdownMenu,{children:[(0,jsx_runtime.jsx)(DropdownMenuTrigger,{asChild:!0,children:(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[(0,jsx_runtime.jsx)(react_icons_esm.Oer,{className:"h-4 w-4"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,jsx_runtime.jsxs)(DropdownMenuContent,{align:"end",className:"w-[160px]",children:[(0,jsx_runtime.jsx)(DropdownMenuItem,{onClick:event=>{event.stopPropagation(),setTaskFormOpen(!0)},children:"Edit"}),!task.isActive&&(0,jsx_runtime.jsx)(DropdownMenuItem,{onClick:event=>{event.stopPropagation(),editTask(task._id,{isActive:!0})},children:"Activate"}),task.isActive&&(0,jsx_runtime.jsx)(DropdownMenuItem,{onClick:event=>{event.stopPropagation(),editTask(task._id,{isActive:!1})},children:"Deactivate"}),(0,jsx_runtime.jsx)(DropdownMenuSeparator,{}),(0,jsx_runtime.jsx)(DropdownMenuItem,{onClick:event=>{event.stopPropagation(),deleteTask(task._id)},children:"Delete"})]})]})]})}DataTableRowActions.__docgenInfo={description:"",methods:[],displayName:"DataTableRowActions",props:{row:{required:!0,tsType:{name:"Row",elements:[{name:"TData"}],raw:"Row<TData>"},description:""}}};var actions_context=__webpack_require__("./src/app/utils/hooks/use-projects/actions-context.tsx");const Projects=({testId})=>{const{data:projects,defaultProject,isLoading}=(0,state_context.h)(),{updateOrder}=(0,actions_context.l)(),{data:tasks}=(0,use_tasks.Ay)(),{data:tags}=(0,use_tags.Ay)(),[selectedProjectId,setSelectedProjectId]=(0,react.useState)(null==defaultProject?void 0:defaultProject._id),[enableSorting,setEnableSorting]=(0,react.useState)(!1),sensors=(0,core_esm.FR)((0,core_esm.MS)(core_esm.AN),(0,core_esm.MS)(core_esm.uN,{coordinateGetter:sortable_esm.JR})),[openTaskForm,setOpenTaskForm]=(0,react.useState)({selectedTask:null,open:!1}),[openProjectForm,setOpenProjectForm]=(0,react.useState)(!1),filteredTasks=tasks.filter((task=>task.projectId===selectedProjectId&&!task.completed)),columns=((projects,tags)=>[{accessorKey:"title",header:({column})=>(0,jsx_runtime.jsx)(DataTableColumnHeader,{column,title:"Title"}),cell:({row})=>(0,jsx_runtime.jsx)("div",{className:"flex",children:(0,jsx_runtime.jsxs)("span",{className:"max-w-[300px] truncate font-medium space-x-2",children:[(0,jsx_runtime.jsx)("span",{children:row.getValue("title")}),row.original.deadline&&(0,jsx_runtime.jsx)(badge.E,{variant:"destructive",children:"Deadline"}),tags.filter((tag=>row.original.tags.includes(tag._id))).map((tag=>(0,jsx_runtime.jsx)(badge.E,{variant:"outline",children:tag.title},tag._id)))]})})},{accessorKey:"description",header:({column})=>(0,jsx_runtime.jsx)(DataTableColumnHeader,{column,title:"Description"}),cell:({row})=>(0,jsx_runtime.jsx)("div",{className:"flex space-x-2",children:(0,jsx_runtime.jsx)("span",{className:"max-w-[200px] truncate font-medium",children:row.getValue("description")})}),filterFn:(row,_id,value)=>!!value.filter((tagId=>row.original.tags.includes(tagId))).length},{accessorKey:"estimate",header:({column})=>(0,jsx_runtime.jsx)(DataTableColumnHeader,{column,title:"Estimate"}),cell:({row})=>(0,jsx_runtime.jsx)("div",{className:"flex w-[50px] items-center",children:(0,jsx_runtime.jsx)(Estimate_Estimate,{estimate:row.getValue("estimate")})}),filterFn:(row,id,value)=>value.includes(row.getValue(id)),sortUndefined:!1},{accessorKey:"isActive",header:({column})=>(0,jsx_runtime.jsx)(DataTableColumnHeader,{column,title:"Status"}),cell:({row})=>(0,jsx_runtime.jsx)("div",{className:"flex w-[50px] items-center",children:(0,jsx_runtime.jsx)("span",{children:row.original.isActive?"ACTIVE":""})}),filterFn:(row,id,value)=>value.includes(row.getValue(id))},{accessorKey:"createdAt",header:({column})=>(0,jsx_runtime.jsx)(DataTableColumnHeader,{column,title:"Created At"}),cell:({row})=>(0,jsx_runtime.jsx)("div",{className:"flex w-[100px] items-center",children:(0,jsx_runtime.jsx)("span",{children:(0,format.GP)(row.getValue("createdAt"),"yyyy-MM-dd")})}),filterFn:(row,id,value)=>value.includes(row.getValue(id))},{accessorKey:"updatedAt",header:({column})=>(0,jsx_runtime.jsx)(DataTableColumnHeader,{column,title:"Updated At"}),cell:({row})=>(0,jsx_runtime.jsx)("div",{className:"flex w-[100px] items-center",children:(0,jsx_runtime.jsx)("span",{children:(0,format.GP)(row.getValue("updatedAt"),"yyyy-MM-dd")})}),filterFn:(row,id,value)=>value.includes(row.getValue(id))},{id:"actions",cell:({row})=>(0,jsx_runtime.jsx)(DataTableRowActions,{row})}])(0,tags),closeTaskForm=()=>{setOpenTaskForm({selectedTask:null,open:!1})},closeOpenProjectForm=()=>{setOpenProjectForm(!1)};return isLoading?(0,jsx_runtime.jsx)("div",{children:"Loading..."}):(0,jsx_runtime.jsxs)("div",{"data-testid":testId,children:[(0,jsx_runtime.jsx)(TaskFormModal.A,{onDone:closeTaskForm,onClose:closeTaskForm,editMode:!!openTaskForm.selectedTask,task:openTaskForm.selectedTask?openTaskForm.selectedTask:null,projectId:selectedProjectId,open:openTaskForm.open}),(0,jsx_runtime.jsx)(ProjectModalForm.A,{onDone:closeOpenProjectForm,onClose:closeOpenProjectForm,open:openProjectForm}),(0,jsx_runtime.jsxs)("div",{className:"flex p-4 space-x-6 justify-stretch",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,jsx_runtime.jsx)(ui_button.$,{onClick:()=>setOpenProjectForm(!0),children:"Create Project"}),(0,jsx_runtime.jsx)(ui_button.$,{onClick:()=>setOpenTaskForm({open:!0,selectedTask:null}),children:"Create Task"}),(0,jsx_runtime.jsx)(label.J,{children:"Sort:"}),(0,jsx_runtime.jsx)(ui_switch.d,{checked:enableSorting,onCheckedChange:setEnableSorting})]}),(0,jsx_runtime.jsx)(core_esm.Mp,{sensors,collisionDetection:core_esm.fp,onDragEnd:async event=>{const{active,over}=event;active.id!==over.id&&updateOrder(active.id,over.id)},children:(0,jsx_runtime.jsx)(sortable_esm.gB,{items:projects.map((p=>({...p,id:p._id}))),strategy:sortable_esm._G,disabled:!enableSorting,children:projects.map(((project,index)=>(0,jsx_runtime.jsx)("div",{onClick:()=>{setSelectedProjectId(project._id)},className:enableSorting?index%2==0?"animate-wiggle cursor-grab":"animate-wiggle2 cursor-grab":"",children:(0,jsx_runtime.jsx)(ProjectCard.A,{project,selected:project._id===selectedProjectId})},project._id)))})})]}),(0,jsx_runtime.jsxs)("div",{className:"grow",children:[selectedProjectId&&(0,jsx_runtime.jsx)(ProjectBurnDownChart.A,{projectId:selectedProjectId}),(0,jsx_runtime.jsx)(DataTable,{data:filteredTasks,columns,onRowClick:task=>{setOpenTaskForm({selectedTask:task,open:!0})}})]})]})]})},Projects_Projects=Projects;Projects.__docgenInfo={description:"",methods:[],displayName:"Projects",props:{testId:{required:!1,tsType:{name:"string"},description:""}}};var project=__webpack_require__("./src/app/utils/mocks/project.ts"),task=__webpack_require__("./src/app/utils/mocks/task.ts"),subDays=__webpack_require__("./node_modules/date-fns/subDays.mjs"),date_mock=__webpack_require__("./src/app/utils/date/date.mock.ts");const PROJECTS=(0,project.Hy)([{title:"active projects with not completed tasks"},{title:"active with completed tasks"},{title:"disabled project with tasks",disabled:!0},{title:"disabled project with completed tasks",disabled:!0}]),TODAY_DATE=new Date("2024-02-14"),Projects_stories={title:"Projects/Projects",component:Projects_Projects,tags:["autodocs"],decorators:[Story=>(0,jsx_runtime.jsx)(state_context.f.Provider,{value:{isLoading:!1,data:PROJECTS,defaultProject:PROJECTS[0],getProjectById:id=>PROJECTS.find((p=>p._id===id))||null},children:(0,jsx_runtime.jsx)(use_tasks.sF.Provider,{value:{data:(0,task.J_)([{projectId:PROJECTS[0]._id,completed:!0,createdAt:(0,subDays.e)(TODAY_DATE,15).toString(),completedAt:(0,subDays.e)(TODAY_DATE,10).getTime(),estimate:1},{createdAt:(0,subDays.e)(TODAY_DATE,14).toString(),projectId:PROJECTS[0]._id},{createdAt:(0,subDays.e)(TODAY_DATE,13).toString(),projectId:PROJECTS[0]._id},{projectId:PROJECTS[1]._id,completed:!0},{projectId:PROJECTS[1]._id,completed:!0},{projectId:PROJECTS[2]._id},{projectId:PROJECTS[3]._id,completed:!0},{projectId:PROJECTS[3]._id,completed:!0}]),loading:!1,setData:()=>{}},children:(0,jsx_runtime.jsx)(Story,{})})})]},Default={async beforeEach(){date_mock.t.mockReturnValue(TODAY_DATE)},args:{}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  async beforeEach() {\n    now.mockReturnValue(TODAY_DATE);\n  },\n  args: defaultArgs\n}",...Default.parameters?.docs?.source}}}},"./src/app/components/ui/table.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A0:()=>TableHeader,BF:()=>TableBody,Gg:()=>TableFooter,Hj:()=>TableRow,XI:()=>Table,nA:()=>TableCell,nd:()=>TableHead,r6:()=>TableCaption});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_app_components_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/app/components/utils/index.ts");const Table=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative w-full overflow-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("table",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("w-full caption-bottom text-sm",className),...props})})));Table.displayName="Table";const TableHeader=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("thead",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("[&_tr]:border-b",className),...props})));TableHeader.displayName="TableHeader";const TableBody=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tbody",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("[&_tr:last-child]:border-0",className),...props})));TableBody.displayName="TableBody";const TableFooter=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tfoot",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",className),...props})));TableFooter.displayName="TableFooter";const TableRow=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tr",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",className),...props})));TableRow.displayName="TableRow";const TableHead=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",className),...props})));TableHead.displayName="TableHead";const TableCell=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",className),...props})));TableCell.displayName="TableCell";const TableCaption=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("caption",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("mt-4 text-sm text-muted-foreground",className),...props})));TableCaption.displayName="TableCaption",Table.__docgenInfo={description:"",methods:[],displayName:"Table"},TableHeader.__docgenInfo={description:"",methods:[],displayName:"TableHeader"},TableBody.__docgenInfo={description:"",methods:[],displayName:"TableBody"},TableFooter.__docgenInfo={description:"",methods:[],displayName:"TableFooter"},TableHead.__docgenInfo={description:"",methods:[],displayName:"TableHead"},TableRow.__docgenInfo={description:"",methods:[],displayName:"TableRow"},TableCell.__docgenInfo={description:"",methods:[],displayName:"TableCell"},TableCaption.__docgenInfo={description:"",methods:[],displayName:"TableCaption"}}}]);