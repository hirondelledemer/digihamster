"use strict";(self.webpackChunkdigihamster=self.webpackChunkdigihamster||[]).push([[4477],{"./src/app/components/DailyProgress/DailyProgress.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DailyProgress_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),date=__webpack_require__("./src/app/utils/date/date.ts"),use_entry=__webpack_require__("./src/app/utils/hooks/use-entry.tsx"),use_habits=__webpack_require__("./src/app/utils/hooks/use-habits.tsx"),use_tasks=__webpack_require__("./src/app/utils/hooks/use-tasks.tsx"),eachDayOfInterval=__webpack_require__("./node_modules/date-fns/eachDayOfInterval.mjs"),subDays=__webpack_require__("./node_modules/date-fns/subDays.mjs"),isSameDay=__webpack_require__("./node_modules/date-fns/isSameDay.mjs"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const DailyProgress=({testId})=>{const{data:tasks}=(0,use_tasks.Ay)(),{data:habits}=(0,use_habits.Ay)(),{data:journalEntries}=(0,use_entry.Ay)(),last11Days=(0,react.useMemo)((()=>(0,eachDayOfInterval.k)({start:(0,subDays.e)((0,date.tB)(),10),end:(0,date.tB)()})),[]),completedTasksCount=(0,react.useMemo)((()=>last11Days.map((date=>tasks.filter((t=>t.completedAt&&(0,isSameDay.r)(t.completedAt,date.getTime()))).length))),[last11Days,tasks]),journalEntriesCreated=(0,react.useMemo)((()=>last11Days.map((date=>journalEntries.filter((j=>j.createdAt&&(0,isSameDay.r)(j.createdAt,date.getTime()))).length))),[journalEntries,last11Days]),completedHabitsCount=(0,react.useMemo)((()=>last11Days.map((date=>habits.filter((h=>h.log.filter((log=>log.completed&&(0,isSameDay.r)(log.at,date.getTime()))).length>0)).length))),[habits,last11Days]);return(0,jsx_runtime.jsxs)("div",{"data-testid":testId,className:"flex items-end h-full relative",children:[(0,jsx_runtime.jsx)("div",{className:"w-full h-[1px] bg-muted-foreground absolute bottom-[10px]"}),(0,jsx_runtime.jsx)("div",{className:"flex justify-items-stretch gap-2 items-end w-full",children:completedTasksCount.map(((taskCount,index)=>(0,jsx_runtime.jsx)("div",{"data-testid":"bar-testid",style:{minWidth:"15px",height:3*taskCount+completedHabitsCount[index]+journalEntriesCreated[index]||"1px",backgroundColor:"#f43f6e"}},index)))})]})},DailyProgress_DailyProgress=DailyProgress;DailyProgress.__docgenInfo={description:"",methods:[],displayName:"DailyProgress",props:{testId:{required:!1,tsType:{name:"string"},description:""}}};const DailyProgress_stories={title:"Charts/DailyProgress",component:DailyProgress_DailyProgress,tags:["autodocs"]},Default={args:{}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: defaultArgs\n}",...Default.parameters?.docs?.source}}}},"./src/app/components/ui/use-toast.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dj:()=>useToast});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");let count=0;const toastTimeouts=new Map,addToRemoveQueue=toastId=>{if(toastTimeouts.has(toastId))return;const timeout=setTimeout((()=>{toastTimeouts.delete(toastId),dispatch({type:"REMOVE_TOAST",toastId})}),1e6);toastTimeouts.set(toastId,timeout)},reducer=(state,action)=>{switch(action.type){case"ADD_TOAST":return{...state,toasts:[action.toast,...state.toasts].slice(0,1)};case"UPDATE_TOAST":return{...state,toasts:state.toasts.map((t=>t.id===action.toast.id?{...t,...action.toast}:t))};case"DISMISS_TOAST":{const{toastId}=action;return toastId?addToRemoveQueue(toastId):state.toasts.forEach((toast=>{addToRemoveQueue(toast.id)})),{...state,toasts:state.toasts.map((t=>t.id===toastId||void 0===toastId?{...t,open:!1}:t))}}case"REMOVE_TOAST":return void 0===action.toastId?{...state,toasts:[]}:{...state,toasts:state.toasts.filter((t=>t.id!==action.toastId))}}},listeners=[];let memoryState={toasts:[]};function dispatch(action){memoryState=reducer(memoryState,action),listeners.forEach((listener=>{listener(memoryState)}))}function toast({...props}){const id=function genId(){return count=(count+1)%Number.MAX_SAFE_INTEGER,count.toString()}(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:id});return dispatch({type:"ADD_TOAST",toast:{...props,id,open:!0,onOpenChange:open=>{open||dismiss()}}}),{id,dismiss,update:props=>dispatch({type:"UPDATE_TOAST",toast:{...props,id}})}}function useToast(){const[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState(memoryState);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>(listeners.push(setState),()=>{const index=listeners.indexOf(setState);index>-1&&listeners.splice(index,1)})),[state]),{...state,toast,dismiss:toastId=>dispatch({type:"DISMISS_TOAST",toastId})}}},"./src/app/utils/common/update-array.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function updateObjById(arr,id,updatedData){return arr.map((item=>item._id.toString()===id?{...item,...updatedData}:item))}__webpack_require__.d(__webpack_exports__,{L:()=>updateObjById})},"./src/app/utils/date/date.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k0:()=>getTimestampsFrom,rZ:()=>getTodayWithZeroHours,tB:()=>now});var _barrel_optimize_names_subDays_date_fns__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/subDays.mjs");const now=()=>new Date,getTodayWithZeroHours=()=>{const today=now();return today.setHours(0,0,0,0),today},getTimestampsFrom=(startingDate,howMany)=>{const array=[];for(let i=0;i<=howMany;i++)array.push((0,_barrel_optimize_names_subDays_date_fns__WEBPACK_IMPORTED_MODULE_0__.e)(startingDate,i).getTime());return array.reverse()}},"./src/app/utils/hooks/use-entry.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>useJournalEntries});__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");__webpack_require__("./node_modules/axios/lib/axios.js");const EntriesContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({data:[],setData:()=>{}}),{Provider}=EntriesContext;function useJournalEntries(){const{data,setData}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(EntriesContext);return{data,setData}}},"./src/app/utils/hooks/use-habits.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>useHabits,HL:()=>HabitsContext});__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");__webpack_require__("./node_modules/axios/lib/axios.js"),__webpack_require__("./src/app/components/ui/use-toast.ts"),__webpack_require__("./src/app/utils/common/update-array.ts");const HabitsContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({data:[],setData:()=>{},loading:!1,updateHabit:()=>{},createHabit:()=>{},deleteHabit:()=>{},addLog:()=>{}}),{Provider}=HabitsContext;function useHabits(){const{data,setData,updateHabit,createHabit,addLog,deleteHabit}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(HabitsContext);return{data,setData,updateHabit,createHabit,addLog,deleteHabit}}},"./src/app/utils/hooks/use-tasks.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>useTasks,sF:()=>TasksContext});__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");__webpack_require__("./node_modules/axios/lib/axios.js"),__webpack_require__("./src/app/components/ui/use-toast.ts");const TasksContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({data:[],setData:()=>{},error:void 0,loading:!1}),{Provider}=TasksContext;function useTasks(){const{data,setData,loading}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(TasksContext);return{data,setData,loading}}},"./node_modules/date-fns/addDays.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>addDays});var _toDate_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/toDate.mjs"),_constructFrom_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/constructFrom.mjs");function addDays(date,amount){const _date=(0,_toDate_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(date);return isNaN(amount)?(0,_constructFrom_mjs__WEBPACK_IMPORTED_MODULE_1__.w)(date,NaN):amount?(_date.setDate(_date.getDate()+amount),_date):_date}},"./node_modules/date-fns/constructFrom.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function constructFrom(date,value){return date instanceof Date?new date.constructor(value):new Date(value)}__webpack_require__.d(__webpack_exports__,{w:()=>constructFrom})},"./node_modules/date-fns/eachDayOfInterval.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>eachDayOfInterval});var _toDate_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/toDate.mjs");function eachDayOfInterval(interval,options){const startDate=(0,_toDate_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(interval.start),endDate=(0,_toDate_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(interval.end);let reversed=+startDate>+endDate;const endTime=reversed?+startDate:+endDate,currentDate=reversed?endDate:startDate;currentDate.setHours(0,0,0,0);let step=options?.step??1;if(!step)return[];step<0&&(step=-step,reversed=!reversed);const dates=[];for(;+currentDate<=endTime;)dates.push((0,_toDate_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(currentDate)),currentDate.setDate(currentDate.getDate()+step),currentDate.setHours(0,0,0,0);return reversed?dates.reverse():dates}},"./node_modules/date-fns/isSameDay.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>isSameDay});var _startOfDay_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/startOfDay.mjs");function isSameDay(dateLeft,dateRight){return+(0,_startOfDay_mjs__WEBPACK_IMPORTED_MODULE_0__.o)(dateLeft)==+(0,_startOfDay_mjs__WEBPACK_IMPORTED_MODULE_0__.o)(dateRight)}},"./node_modules/date-fns/startOfDay.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>startOfDay});var _toDate_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/toDate.mjs");function startOfDay(date){const _date=(0,_toDate_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(date);return _date.setHours(0,0,0,0),_date}},"./node_modules/date-fns/subDays.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>subDays});var _addDays_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/addDays.mjs");function subDays(date,amount){return(0,_addDays_mjs__WEBPACK_IMPORTED_MODULE_0__.f)(date,-amount)}},"./node_modules/date-fns/toDate.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function toDate(argument){const argStr=Object.prototype.toString.call(argument);return argument instanceof Date||"object"==typeof argument&&"[object Date]"===argStr?new argument.constructor(+argument):"number"==typeof argument||"[object Number]"===argStr||"string"==typeof argument||"[object String]"===argStr?new Date(argument):new Date(NaN)}__webpack_require__.d(__webpack_exports__,{a:()=>toDate})}}]);