"use strict";(self.webpackChunkdigihamster=self.webpackChunkdigihamster||[]).push([[3357],{"./node_modules/@radix-ui/react-compose-refs/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>useComposedRefs,t:()=>composeRefs});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function setRef(ref,value){if("function"==typeof ref)return ref(value);null!=ref&&(ref.current=value)}function composeRefs(...refs){return node=>{let hasCleanup=!1;const cleanups=refs.map((ref=>{const cleanup=setRef(ref,node);return hasCleanup||"function"!=typeof cleanup||(hasCleanup=!0),cleanup}));if(hasCleanup)return()=>{for(let i=0;i<cleanups.length;i++){const cleanup=cleanups[i];"function"==typeof cleanup?cleanup():setRef(refs[i],null)}}}}function useComposedRefs(...refs){return react__WEBPACK_IMPORTED_MODULE_0__.useCallback(composeRefs(...refs),refs)}},"./node_modules/@radix-ui/react-primitive/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{hO:()=>dispatchDiscreteCustomEvent,sG:()=>Primitive});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react-dom/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),Primitive=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((primitive,node)=>{const Node=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,forwardedRef)=>{const{asChild,...primitiveProps}=props,Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.DX:node;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Comp,{...primitiveProps,ref:forwardedRef})}));return Node.displayName=`Primitive.${node}`,{...primitive,[node]:Node}}),{});function dispatchDiscreteCustomEvent(target,event){target&&react_dom__WEBPACK_IMPORTED_MODULE_1__.flushSync((()=>target.dispatchEvent(event)))}},"./node_modules/@radix-ui/react-slot/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DX:()=>Slot,xV:()=>Slottable});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),Slot=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,forwardedRef)=>{const{children,...slotProps}=props,childrenArray=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children),slottable=childrenArray.find(isSlottable);if(slottable){const newElement=slottable.props.children,newChildren=childrenArray.map((child=>child===slottable?react__WEBPACK_IMPORTED_MODULE_0__.Children.count(newElement)>1?react__WEBPACK_IMPORTED_MODULE_0__.Children.only(null):react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(newElement)?newElement.props.children:null:child));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SlotClone,{...slotProps,ref:forwardedRef,children:react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(newElement)?react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(newElement,void 0,newChildren):null})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SlotClone,{...slotProps,ref:forwardedRef,children})}));Slot.displayName="Slot";var SlotClone=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,forwardedRef)=>{const{children,...slotProps}=props;if(react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(children)){const childrenRef=function getElementRef(element){let getter=Object.getOwnPropertyDescriptor(element.props,"ref")?.get,mayWarn=getter&&"isReactWarning"in getter&&getter.isReactWarning;if(mayWarn)return element.ref;if(getter=Object.getOwnPropertyDescriptor(element,"ref")?.get,mayWarn=getter&&"isReactWarning"in getter&&getter.isReactWarning,mayWarn)return element.props.ref;return element.props.ref||element.ref}(children);return react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(children,{...mergeProps(slotProps,children.props),ref:forwardedRef?(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.t)(forwardedRef,childrenRef):childrenRef})}return react__WEBPACK_IMPORTED_MODULE_0__.Children.count(children)>1?react__WEBPACK_IMPORTED_MODULE_0__.Children.only(null):null}));SlotClone.displayName="SlotClone";var Slottable=({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children});function isSlottable(child){return react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(child)&&child.type===Slottable}function mergeProps(slotProps,childProps){const overrideProps={...childProps};for(const propName in childProps){const slotPropValue=slotProps[propName],childPropValue=childProps[propName];/^on[A-Z]/.test(propName)?slotPropValue&&childPropValue?overrideProps[propName]=(...args)=>{childPropValue(...args),slotPropValue(...args)}:slotPropValue&&(overrideProps[propName]=slotPropValue):"style"===propName?overrideProps[propName]={...slotPropValue,...childPropValue}:"className"===propName&&(overrideProps[propName]=[slotPropValue,childPropValue].filter(Boolean).join(" "))}return{...slotProps,...overrideProps}}},"./src/app/components/CreateTaskForm/CreateTaskForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CreateTaskForm_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),CreateTaskForm=__webpack_require__("./src/app/components/CreateTaskForm/index.ts");const generateTag=(i=1,properties)=>({_id:`tag${i}`,title:`Tag ${i}`,color:`tag-color-${i}`,deleted:!1,...properties});var use_tags=__webpack_require__("./src/app/utils/hooks/use-tags.tsx"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),use_toast=__webpack_require__("./src/app/components/ui/use-toast.ts"),sortable_esm=__webpack_require__("./node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),update_array=__webpack_require__("./src/app/utils/common/update-array.ts"),ProjectsStateActionType=function(ProjectsStateActionType){return ProjectsStateActionType.StartLoading="START_LOADING",ProjectsStateActionType.FinishLoading="FINISH_LOADING",ProjectsStateActionType.Error="ERROR",ProjectsStateActionType.CreateProject="CREATE_PROJECT",ProjectsStateActionType.UpdateProject="UPDATE_PROJECT",ProjectsStateActionType.DeleteProject="DELETE_PROJECT",ProjectsStateActionType.UpdateOrder="UPDATE_ORDER",ProjectsStateActionType}({});function reducer(state,action){switch(action.type){case ProjectsStateActionType.StartLoading:return{...state,isLoading:!0,data:[],defaultProject:null};case ProjectsStateActionType.FinishLoading:return{...state,isLoading:!1,data:action.payload.data,defaultProject:action.payload.defaultProject};case ProjectsStateActionType.Error:return{...state,isLoading:!1,data:[],defaultProject:null,errorMessage:action.payload.errorMessage};case ProjectsStateActionType.CreateProject:return{...state,isLoading:!0,data:[...state.data,action.payload.project]};case ProjectsStateActionType.UpdateProject:return{...state,isLoading:!1,data:(0,update_array.L)(state.data,action.payload.id,action.payload.project)};case ProjectsStateActionType.DeleteProject:return{...state,isLoading:!1,data:state.data.filter((project=>project._id!==action.payload.id))};case ProjectsStateActionType.UpdateOrder:{const oldIndex=state.data.findIndex((p=>p._id===action.payload.movedProjectId)),newIndex=state.data.findIndex((p=>p._id===action.payload.overProjectId));return{...state,isLoading:!1,data:(0,sortable_esm.be)(state.data,oldIndex,newIndex)}}default:throw Error("Unknown action")}}var axios=__webpack_require__("./node_modules/axios/lib/axios.js");const api_getProjects=()=>axios.A.get("/api/projects"),api_createProject=data=>axios.A.post("/api/projects",data),api_updateProject=(id,props)=>axios.A.patch("/api/projects",{id,...props}),api_deleteProject=id=>axios.A.patch("/api/projects",{id,deleted:!0}),api_updateOrder=params=>axios.A.patch("/api/projects/sort",params);var state_context=__webpack_require__("./src/app/utils/hooks/use-projects/state-context.ts"),actions_context=__webpack_require__("./src/app/utils/hooks/use-projects/actions-context.tsx");const handleApiError=(error,toast)=>{var _error_response_data,_error_response;toast({title:"Error",description:(null===(_error_response=error.response)||void 0===_error_response||null===(_error_response_data=_error_response.data)||void 0===_error_response_data?void 0:_error_response_data.message)||"An unexpected error occurred",variant:"destructive"})},handleSuccessToast=(toast,message)=>{toast({title:"Success",description:message})},ProjectsContextProvider=({children})=>{const[state,dispatch]=(0,react.useReducer)(reducer,{isLoading:!0,data:[],defaultProject:null}),{toast}=(0,use_toast.dj)(),fetchProjectsMemoized=(0,react.useCallback)((()=>{(async(dispatch,toast)=>{try{dispatch({type:ProjectsStateActionType.StartLoading});const projectResponse=await api_getProjects();dispatch({type:ProjectsStateActionType.FinishLoading,payload:{data:projectResponse.data.projects,defaultProject:projectResponse.data.defaultProject}})}catch(err){dispatch({type:ProjectsStateActionType.Error,payload:{errorMessage:err}}),handleApiError(err,toast)}})(dispatch,toast)}),[toast]);(0,react.useEffect)((()=>{fetchProjectsMemoized()}),[fetchProjectsMemoized]);const createProject=(0,react.useCallback)((async(data,onDone)=>{const tempProject={_id:"temp-id",deleted:!1,order:0,...data};dispatch({type:ProjectsStateActionType.CreateProject,payload:{project:tempProject}}),onDone&&onDone();try{const response=await api_createProject(data);dispatch({type:ProjectsStateActionType.UpdateProject,payload:{id:"temp-id",project:response.data}}),handleSuccessToast(toast,"Project has been created")}catch(e){var _e_response_data,_e_response;dispatch({type:ProjectsStateActionType.DeleteProject,payload:{id:"temp-id"}});const errorMessage=(null===(_e_response=e.response)||void 0===_e_response||null===(_e_response_data=_e_response.data)||void 0===_e_response_data?void 0:_e_response_data.message)||"An unexpected error occurred";handleApiError(errorMessage,toast)}}),[toast]),updateProject=(0,react.useCallback)((async(projectId,props,onDone)=>{try{dispatch({type:ProjectsStateActionType.UpdateProject,payload:{id:projectId,project:props}}),onDone&&onDone(),await api_updateProject(projectId,props),handleSuccessToast(toast,"Project has been updated")}catch(e){var _e_response_data,_e_response;const errorMessage=(null===(_e_response=e.response)||void 0===_e_response||null===(_e_response_data=_e_response.data)||void 0===_e_response_data?void 0:_e_response_data.message)||"An unexpected error occurred";handleApiError(errorMessage,toast)}}),[toast]),deleteProject=(0,react.useCallback)((async(projectId,onDone)=>{try{dispatch({type:ProjectsStateActionType.DeleteProject,payload:{id:projectId}}),onDone&&onDone(),await api_deleteProject(projectId),handleSuccessToast(toast,"Project has been deleted")}catch(e){var _e_response_data,_e_response;const errorMessage=(null===(_e_response=e.response)||void 0===_e_response||null===(_e_response_data=_e_response.data)||void 0===_e_response_data?void 0:_e_response_data.message)||"An unexpected error occurred";handleApiError(errorMessage,toast)}}),[toast]);return(0,jsx_runtime.jsx)(state_context.f.Provider,{value:{...state,getProjectById:id=>state.data.find((project=>project._id===id))||null},children:(0,jsx_runtime.jsx)(actions_context.r.Provider,{value:{create:createProject,update:updateProject,delete:deleteProject,updateOrder:async(movedProjectId,overProjectId,onDone)=>{try{dispatch({type:ProjectsStateActionType.UpdateOrder,payload:{movedProjectId,overProjectId}}),onDone&&onDone(),await api_updateOrder({sortOrder:state.data.map(((p,index)=>({projectId:p._id,order:index})))}),handleSuccessToast(toast,"Project order been updated")}catch(e){var _e_response_data,_e_response;const errorMessage=(null===(_e_response=e.response)||void 0===_e_response||null===(_e_response_data=_e_response.data)||void 0===_e_response_data?void 0:_e_response_data.message)||"An unexpected error occurred";handleApiError(errorMessage,toast)}}},children})})};ProjectsContextProvider.__docgenInfo={description:"",methods:[],displayName:"ProjectsContextProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const CreateTaskForm_stories={title:"Tasks/CreateTaskForm",component:CreateTaskForm.A,tags:["autodocs"],decorators:[Story=>{return(0,jsx_runtime.jsx)(use_tags.ji.Provider,{value:{data:(count=3,[...Array(count)].map(((_v,i)=>generateTag(i)))),loading:!1,setData:()=>{}},children:(0,jsx_runtime.jsx)(ProjectsContextProvider,{children:(0,jsx_runtime.jsx)(Story,{})})});var count}]},Default={args:{onDone:()=>{}}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: defaultArgs\n}",...Default.parameters?.docs?.source}}}},"./src/app/components/CreateTaskForm/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CreateTaskForm_CreateTaskForm});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),use_edit_task=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/app/utils/hooks/use-edit-task.tsx")),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),ui_form=__webpack_require__("./src/app/components/ui/form.tsx"),RteFormField=__webpack_require__("./src/app/components/RteFormField/index.ts"),ui_button=__webpack_require__("./src/app/components/ui/button.tsx"),date=__webpack_require__("./src/app/utils/date/date.ts"),addDays=__webpack_require__("./node_modules/date-fns/addDays.mjs"),addHours=__webpack_require__("./node_modules/date-fns/addHours.mjs"),state_context=__webpack_require__("./src/app/utils/hooks/use-projects/state-context.ts");const FormSchema=lib.z.object({description:lib.z.object({title:lib.z.string().min(1,{message:"required"}),content:lib.z.any(),tags:lib.z.array(lib.z.string()),tasks:lib.z.array(lib.z.string()),textContent:lib.z.string(),contentJSON:lib.z.any(),projectId:lib.z.string().optional(),params:lib.z.array(lib.z.string())})}),CreateTaskForm=({testId,onDone,deadline,primaryTaskId,projectId})=>{const{defaultProject}=(0,state_context.h)(),{createNewTask}=(0,use_edit_task.A)(),form=(0,index_esm.mN)({resolver:(0,zod.u)(FormSchema),defaultValues:{description:{title:"",content:"",tags:[],tasks:[],textContent:"",contentJSON:{},projectId:null==defaultProject?void 0:defaultProject._id}}});return(0,jsx_runtime.jsx)(ui_form.lV,{...form,"data-testid":testId,children:(0,jsx_runtime.jsxs)("form",{onSubmit:form.handleSubmit((values=>{const taskData={title:values.description.title,description:values.description.textContent,descriptionFull:values.description.contentJSON,projectId:projectId||values.description.projectId||(null==defaultProject?void 0:defaultProject._id)||null,isActive:values.description.params.includes("active"),tags:values.description.tags,subtasks:values.description.tasks,deadline:values.description.params.includes("tmr")?(0,addDays.f)((0,date.tB)(),1).valueOf():values.description.params.includes("today")?(0,addHours.L)((0,date.tB)(),2).valueOf():deadline,primaryTaskId};createNewTask(taskData),form.resetField("description"),onDone()})),className:"space-y-6",children:[(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"description",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{className:"flex flex-col",children:[(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(RteFormField.A,{testId:"CreateTaskForm-rte-testId",value:field.value.content,onChange:field.onChange})}),(0,jsx_runtime.jsx)(ui_form.Bq,{})]})}),(0,jsx_runtime.jsx)("div",{className:"space-x-2",children:(0,jsx_runtime.jsx)(ui_button.$,{type:"submit",children:"Create"})})]})})},CreateTaskForm_CreateTaskForm=CreateTaskForm;CreateTaskForm.__docgenInfo={description:"",methods:[],displayName:"CreateTaskForm",props:{testId:{required:!1,tsType:{name:"string"},description:""},deadline:{required:!1,tsType:{name:"number"},description:""},primaryTaskId:{required:!1,tsType:{name:"string"},description:""},projectId:{required:!1,tsType:{name:"string"},description:""}}}},"./src/app/components/RteFormField/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>RteFormField_RteFormField});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),RichTextEditor=__webpack_require__("./src/app/components/RichTextEditor/index.ts"),rte_hook=__webpack_require__("./src/app/utils/rte/rte-hook.ts");const RteFormField=({testId,value,onChange})=>{const{editor,getRteValue}=(0,rte_hook.P)({value,editable:!0});return(0,react.useEffect)((()=>{editor&&void 0!==value&&editor.commands.setContent(value)}),[editor,value]),editor?(0,jsx_runtime.jsx)(RichTextEditor.A,{testId,editor,onBlur:()=>onChange(getRteValue())}):null},RteFormField_RteFormField=RteFormField;RteFormField.__docgenInfo={description:"",methods:[],displayName:"RteFormField",props:{testId:{required:!1,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"string"},description:""}}}},"./src/app/components/ui/form.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bq:()=>RteMessage,C5:()=>FormMessage,MJ:()=>FormControl,Rr:()=>FormDescription,eI:()=>FormItem,lR:()=>FormLabel,lV:()=>Form,zB:()=>FormField});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),react_hook_form__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),_app_components_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/app/components/utils/index.ts"),_app_components_ui_label__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/app/components/ui/label.tsx");const Form=react_hook_form__WEBPACK_IMPORTED_MODULE_3__.Op,FormFieldContext=react__WEBPACK_IMPORTED_MODULE_1__.createContext({}),FormField=({...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FormFieldContext.Provider,{value:{name:props.name},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_hook_form__WEBPACK_IMPORTED_MODULE_3__.xI,{...props})}),useFormField=()=>{const fieldContext=react__WEBPACK_IMPORTED_MODULE_1__.useContext(FormFieldContext),itemContext=react__WEBPACK_IMPORTED_MODULE_1__.useContext(FormItemContext),{getFieldState,formState}=(0,react_hook_form__WEBPACK_IMPORTED_MODULE_3__.xW)(),fieldState=getFieldState(fieldContext.name,formState);if(!fieldContext)throw new Error("useFormField should be used within <FormField>");const{id}=itemContext;return{id,name:fieldContext.name,formItemId:`${id}-form-item`,formDescriptionId:`${id}-form-item-description`,formMessageId:`${id}-form-item-message`,...fieldState}},FormItemContext=react__WEBPACK_IMPORTED_MODULE_1__.createContext({}),FormItem=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>{const id=react__WEBPACK_IMPORTED_MODULE_1__.useId();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(FormItemContext.Provider,{value:{id},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("space-y-2",className),...props})})}));FormItem.displayName="FormItem";const FormLabel=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>{const{error,formItemId}=useFormField();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_components_ui_label__WEBPACK_IMPORTED_MODULE_2__.J,{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(error&&"text-destructive",className),htmlFor:formItemId,...props})}));FormLabel.displayName="FormLabel";const FormControl=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({...props},ref)=>{const{error,formItemId,formDescriptionId,formMessageId}=useFormField();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_5__.DX,{ref,id:formItemId,"aria-describedby":error?`${formDescriptionId} ${formMessageId}`:`${formDescriptionId}`,"aria-invalid":!!error,...props})}));FormControl.displayName="FormControl";const FormDescription=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>{const{formDescriptionId}=useFormField();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{ref,id:formDescriptionId,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("text-[0.8rem] text-muted-foreground",className),...props})}));FormDescription.displayName="FormDescription";const FormMessage=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,children,...props},ref)=>{const{error,formMessageId}=useFormField(),body=error?String(null==error?void 0:error.message):children;return body?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{ref,id:formMessageId,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("text-[0.8rem] font-medium text-destructive",className),...props,children:body}):null}));FormMessage.displayName="FormMessage";const RteMessage=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,children,...props},ref)=>{const{error,formMessageId}=useFormField(),body=error?Object.keys(error).map((key=>`${key}: ${error[key].message}`)).join("; "):children;return body?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{ref,id:formMessageId,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("text-[0.8rem] font-medium text-destructive",className),...props,children:body}):null}));RteMessage.displayName="RteMessage",FormItem.__docgenInfo={description:"",methods:[],displayName:"FormItem"},FormLabel.__docgenInfo={description:"",methods:[],displayName:"FormLabel"},FormControl.__docgenInfo={description:"",methods:[],displayName:"FormControl"},FormDescription.__docgenInfo={description:"",methods:[],displayName:"FormDescription"},FormMessage.__docgenInfo={description:"",methods:[],displayName:"FormMessage"},FormField.__docgenInfo={description:"",methods:[],displayName:"FormField"},RteMessage.__docgenInfo={description:"",methods:[],displayName:"RteMessage"}},"./src/app/components/ui/label.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>Label});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-label/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_app_components_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/app/components/utils/index.ts");const labelVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_2__.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_3__.b,{ref,className:(0,_app_components_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(labelVariants(),className),...props})));Label.displayName=_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_3__.b.displayName,Label.__docgenInfo={description:"",methods:[]}},"./src/app/utils/common/update-array.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function updateObjById(arr,id,updatedData){return arr.map((item=>item._id.toString()===id?{...item,...updatedData}:item))}__webpack_require__.d(__webpack_exports__,{L:()=>updateObjById})},"./src/app/utils/date/date.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k0:()=>getTimestampsFrom,rZ:()=>getTodayWithZeroHours,tB:()=>now});var _barrel_optimize_names_subDays_date_fns__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/subDays.mjs");const now=()=>new Date,getTodayWithZeroHours=()=>{const today=now();return today.setHours(0,0,0,0),today},getTimestampsFrom=(startingDate,howMany)=>{const array=[];for(let i=0;i<=howMany;i++)array.push((0,_barrel_optimize_names_subDays_date_fns__WEBPACK_IMPORTED_MODULE_0__.e)(startingDate,i).getTime());return array.reverse()}},"./src/app/utils/hooks/use-edit-task.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,L:()=>useEditTask});var _use_tasks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/utils/hooks/use-tasks.tsx"),_common_update_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/app/utils/common/update-array.ts"),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/axios/lib/axios.js"),_app_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/app/components/ui/use-toast.ts"),_date_date__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/app/utils/date/date.ts");const useEditTask=()=>{const{setData:setTasksData}=(0,_use_tasks__WEBPACK_IMPORTED_MODULE_0__.Ay)(),{toast}=(0,_app_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_1__.dj)();return{editTask:async(taskId,props,onDone)=>{try{setTasksData((t=>(0,_common_update_array__WEBPACK_IMPORTED_MODULE_4__.L)(t,taskId,{...props}))),onDone&&onDone(),await axios__WEBPACK_IMPORTED_MODULE_3__.A.patch("/api/tasks/v2",{taskId,...props}),toast({title:"Success",description:"Task has been updated"})}catch(e){toast({title:"Error",description:JSON.stringify(e),variant:"destructive"})}},deleteTask:async(taskId,onDone)=>{try{setTasksData((tasks=>tasks.filter((task=>task._id!==taskId)))),onDone&&onDone(),await axios__WEBPACK_IMPORTED_MODULE_3__.A.patch("/api/tasks/v2",{taskId,deleted:!0}),toast({title:"Success",description:"Task has been deleted"})}catch(e){toast({title:"Error",description:JSON.stringify(e),variant:"destructive"})}},createNewTask:async data=>{const tempTask={_id:"temp-id",completed:!1,deleted:!1,sortOrder:null,completedAt:void 0,activatedAt:void 0,parentTaskId:null,createdAt:(0,_date_date__WEBPACK_IMPORTED_MODULE_2__.tB)().toDateString(),updatedAt:(0,_date_date__WEBPACK_IMPORTED_MODULE_2__.tB)().toDateString(),relatedTaskIds:[],relatedNoteIds:[],...data};setTasksData((e=>[...e,tempTask]));try{await axios__WEBPACK_IMPORTED_MODULE_3__.A.post("/api/tasks/v2",data);const response=await axios__WEBPACK_IMPORTED_MODULE_3__.A.get("/api/tasks/v2");setTasksData(response.data),toast({title:"Success",description:"Task has been created"})}catch(e){toast({title:"Error",description:JSON.stringify(e),variant:"destructive"})}}}},__WEBPACK_DEFAULT_EXPORT__=useEditTask},"./src/app/utils/hooks/use-projects/actions-context.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>useProjectsActions,r:()=>ProjectsActionsContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const DEFAULT_PROJECTS_ACTIONS={create:()=>{},update:()=>{},delete:()=>{},updateOrder:()=>{}},ProjectsActionsContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(DEFAULT_PROJECTS_ACTIONS),useProjectsActions=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ProjectsActionsContext)},"./src/app/utils/hooks/use-tasks.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>useTasks,sF:()=>TasksContext});__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");__webpack_require__("./node_modules/axios/lib/axios.js"),__webpack_require__("./src/app/components/ui/use-toast.ts");const TasksContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({data:[],setData:()=>{},error:void 0,loading:!1}),{Provider}=TasksContext;function useTasks(){const{data,setData,loading}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(TasksContext);return{data,setData,loading}}},"./node_modules/class-variance-authority/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>cva});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs");const falsyToString=value=>"boolean"==typeof value?`${value}`:0===value?"0":value,cx=clsx__WEBPACK_IMPORTED_MODULE_0__.$,cva=(base,config)=>props=>{var _config_compoundVariants;if(null==(null==config?void 0:config.variants))return cx(base,null==props?void 0:props.class,null==props?void 0:props.className);const{variants,defaultVariants}=config,getVariantClassNames=Object.keys(variants).map((variant=>{const variantProp=null==props?void 0:props[variant],defaultVariantProp=null==defaultVariants?void 0:defaultVariants[variant];if(null===variantProp)return null;const variantKey=falsyToString(variantProp)||falsyToString(defaultVariantProp);return variants[variant][variantKey]})),propsWithoutUndefined=props&&Object.entries(props).reduce(((acc,param)=>{let[key,value]=param;return void 0===value||(acc[key]=value),acc}),{}),getCompoundVariantClassNames=null==config||null===(_config_compoundVariants=config.compoundVariants)||void 0===_config_compoundVariants?void 0:_config_compoundVariants.reduce(((acc,param)=>{let{class:cvClass,className:cvClassName,...compoundVariantOptions}=param;return Object.entries(compoundVariantOptions).every((param=>{let[key,value]=param;return Array.isArray(value)?value.includes({...defaultVariants,...propsWithoutUndefined}[key]):{...defaultVariants,...propsWithoutUndefined}[key]===value}))?[...acc,cvClass,cvClassName]:acc}),[]);return cx(base,getVariantClassNames,getCompoundVariantClassNames,null==props?void 0:props.class,null==props?void 0:props.className)}},"./node_modules/date-fns/addDays.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>addDays});var _toDate_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/toDate.mjs"),_constructFrom_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/constructFrom.mjs");function addDays(date,amount){const _date=(0,_toDate_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(date);return isNaN(amount)?(0,_constructFrom_mjs__WEBPACK_IMPORTED_MODULE_1__.w)(date,NaN):amount?(_date.setDate(_date.getDate()+amount),_date):_date}},"./node_modules/date-fns/addHours.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>addHours});var _addMilliseconds_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/addMilliseconds.mjs"),_constants_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/constants.mjs");function addHours(date,amount){return(0,_addMilliseconds_mjs__WEBPACK_IMPORTED_MODULE_0__.A)(date,amount*_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.s0)}},"./node_modules/date-fns/addMilliseconds.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>addMilliseconds});var _toDate_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/toDate.mjs"),_constructFrom_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/constructFrom.mjs");function addMilliseconds(date,amount){const timestamp=+(0,_toDate_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(date);return(0,_constructFrom_mjs__WEBPACK_IMPORTED_MODULE_1__.w)(date,timestamp+amount)}},"./node_modules/date-fns/constants.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cg:()=>millisecondsInMinute,F6:()=>minutesInDay,Ks:()=>minutesInYear,Nw:()=>minutesInMonth,my:()=>millisecondsInWeek,s0:()=>millisecondsInHour,w4:()=>millisecondsInDay});Math.pow(10,8);const millisecondsInWeek=6048e5,millisecondsInDay=864e5,millisecondsInMinute=6e4,millisecondsInHour=36e5,minutesInYear=525600,minutesInMonth=43200,minutesInDay=1440},"./node_modules/date-fns/constructFrom.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function constructFrom(date,value){return date instanceof Date?new date.constructor(value):new Date(value)}__webpack_require__.d(__webpack_exports__,{w:()=>constructFrom})},"./node_modules/date-fns/subDays.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>subDays});var _addDays_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/addDays.mjs");function subDays(date,amount){return(0,_addDays_mjs__WEBPACK_IMPORTED_MODULE_0__.f)(date,-amount)}},"./node_modules/date-fns/toDate.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function toDate(argument){const argStr=Object.prototype.toString.call(argument);return argument instanceof Date||"object"==typeof argument&&"[object Date]"===argStr?new argument.constructor(+argument):"number"==typeof argument||"[object Number]"===argStr||"string"==typeof argument||"[object String]"===argStr?new Date(argument):new Date(NaN)}__webpack_require__.d(__webpack_exports__,{a:()=>toDate})}}]);